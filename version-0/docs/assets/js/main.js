"use strict";const fieldset=document.querySelectorAll(".js_fieldset"),collapsable=document.querySelectorAll(".js_collapsable");function handleClick(e){let a=e.currentTarget;a.parentNode;for(let e=0;e<collapsable.length;e++)a===collapsable[e]?(fieldset[e].classList.toggle("hidden"),collapsable[e].classList.toggle("icon-end--rotate")):fieldset[e].classList.add("hidden")}for(const e of collapsable)e.addEventListener("click",handleClick);const cardElements=document.querySelectorAll(".js_preview"),cardName=document.querySelector(".js-name"),cardRectangle=document.querySelector(".js-rectangle"),cardIcons=document.querySelectorAll(".js-icon"),form=document.querySelector(".profilecards__app");let data={palette:"",name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""};function handleFillData(e){if("palette"===e.target.name){const a=e.target.name,r=e.target.value;data[a]=r}else if("photo"!==e.target.name){const a=e.target.id,r=e.target.value;data[a]=r}fillCard(data),applyColor(data)}function fillCard(e){if(""!==e.job)cardElements[1].innerHTML=e.job;else if(""!==e.name)cardElements[0].innerHTML=e.name;else if(""!==e.phone)cardElements[3].innerHTML=e.phone;else if(""!==e.email)cardElements[4].innerHTML=e.email;else if(""!==e.linkedin)cardElements[5].innerHTML=e.linkedin;else if(""!==e.github){let a="https://github.com/"+e.github;cardElements[6].setAttribute("href",a)}else""!==e.photo&&cardElements[2].setAttribute("style",`background-image: url(${e.photo})`)}function applyColor(e){if("1"===e.palette){cardName.classList.remove("color1"),cardName.classList.remove("color4"),cardName.classList.remove("color7"),cardName.classList.add("color1"),cardRectangle.classList.remove("color2"),cardRectangle.classList.remove("color5"),cardRectangle.classList.remove("color8"),cardRectangle.classList.add("color2");for(const e of cardIcons)e.classList.remove("color1"),e.classList.remove("color4"),e.classList.remove("color7"),e.classList.add("color1"),e.classList.remove("color3"),e.classList.remove("color6"),e.classList.remove("color9"),e.classList.add("color3")}else if("2"===e.palette){cardName.classList.remove("color1"),cardName.classList.remove("color4"),cardName.classList.remove("color7"),cardName.classList.add("color4"),cardRectangle.classList.remove("color2"),cardRectangle.classList.remove("color5"),cardRectangle.classList.remove("color8"),cardRectangle.classList.add("color5");for(const e of cardIcons)e.classList.remove("color1"),e.classList.remove("color4"),e.classList.remove("color7"),e.classList.add("color4"),e.classList.remove("color3"),e.classList.remove("color6"),e.classList.remove("color9"),e.classList.add("color6")}else if("3"===e.palette){cardName.classList.remove("color1"),cardName.classList.remove("color4"),cardName.classList.remove("color7"),cardName.classList.add("color7"),cardRectangle.classList.remove("color2"),cardRectangle.classList.remove("color5"),cardRectangle.classList.remove("color8"),cardRectangle.classList.add("color8");for(const e of cardIcons)e.classList.remove("color1"),e.classList.remove("color4"),e.classList.remove("color7"),e.classList.add("color7"),e.classList.remove("color3"),e.classList.remove("color6"),e.classList.remove("color9"),e.classList.add("color9")}}form.addEventListener("change",handleFillData);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const a=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(a)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);const resetButton=document.querySelector(".js-resetButton");function handleResetInput(){location.reload()}resetButton.addEventListener("click",handleResetInput);const createdCard=document.querySelector(".js_created-card"),shareMessage=document.querySelector(".js_share-message"),generatedLink=document.querySelector(".js_link_created"),shareButton=document.querySelector(".js_share__button");function handleShareButton(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{createdCard.classList.remove("hidden"),!0===e.success?(shareMessage.innerHTML="La tarjeta ha sido creada",generatedLink.innerHTML=e.cardURL,generatedLink.setAttribute("href",e.cardURL)):(shareMessage.innerHTML="Error al crear la tarjeta",generatedLink.innerHTML="Revisa los datos, pula el bot√≥n RESET y vulve a intentarlo",generatedLink.removeAttribute("href"))})}shareButton.addEventListener("click",handleShareButton);